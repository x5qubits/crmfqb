<!-- Modal Editare Campanie -->
<div class="modal fade" id="editCampaignModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-edit"></i> Editează Campanie</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <form id="editCampaignForm">
        <div class="modal-body">
          <input type="hidden" name="id" id="edit_campaign_id">
          <div class="form-group">
            <label>Titlu Campanie</label>
            <input class="form-control" name="title" id="edit_title" required>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Canal</label>
                <select class="form-control" name="channel" id="edit_channel" required>
                  <option value="EMAIL">Email</option>
                  <option value="SMS">SMS</option>
                  <option value="BOTH">Ambele</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Status</label>
                <select class="form-control" name="status" id="edit_status">
                  <option value="DRAFT">DRAFT</option>
                  <option value="ACTIVE">ACTIVE</option>
                  <option value="PAUSED">PAUSED</option>
                  <option value="DONE">DONE</option>
                </select>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>Timp Programare</label>
            <input class="form-control" type="text" name="schedule_time" id="edit_schedule_time" placeholder="ex: 2025-10-15 14:30:00 sau orice text" required>
            <small class="text-muted">Introdu data/ora programării în orice format</small>
          </div>
          <div class="form-group">
            <label>Subiect Email</label>
            <input class="form-control" name="subject" id="edit_subject" placeholder="Opțional">
          </div>
          <div class="form-group">
            <label>Șablon Mesaj</label>
            <textarea class="form-control" name="body_template" id="edit_body_template" rows="4" placeholder="Folosește {label}, {email}, {phone} ca variabile"></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
          <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Salvează Modificările</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Editare Categorie -->
<div class="modal fade" id="editCategoryModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-edit"></i> Editează Categorie</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <form id="editCategoryForm">
        <div class="modal-body">
          <input type="hidden" name="id" id="edit_category_id">
          <div class="form-group">
            <label>Nume Categorie</label>
            <input class="form-control" name="name" id="edit_category_name" required>
          </div>
          <div class="form-group">
            <label>Descriere</label>
            <input class="form-control" name="description" id="edit_category_description">
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
          <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Salvează Modificările</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Editare Reminder -->
<div class="modal fade" id="editReminderModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-edit"></i> Editează Reminder</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <form id="editReminderForm">
        <div class="modal-body">
          <input type="hidden" name="id" id="edit_reminder_id">
          <div class="form-group">
            <label>Titlu Reminder</label>
            <input class="form-control" name="title" id="edit_reminder_title" required>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Tip Reminder</label>
                <select class="form-control" name="reminder_type" id="edit_reminder_type" required>
                  <option value="BIRTHDAY">Zi de Naștere</option>
                  <option value="CUSTOM_DATE_1">Dată Personalizată 1</option>
                  <option value="CUSTOM_DATE_2">Dată Personalizată 2</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Zile Înainte</label>
                <input class="form-control" type="number" name="days_before" id="edit_reminder_days" min="0" max="365" required>
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <div class="form-group">
                <label>Canal</label>
                <select class="form-control" name="channel" id="edit_reminder_channel" required>
                  <option value="SMS">SMS</option>
                  <option value="EMAIL">Email</option>
                  <option value="BOTH">Ambele</option>
                </select>
              </div>
            </div>
            <div class="col-md-6">
              <div class="form-group">
                <label>Status</label>
                <div class="custom-control custom-switch pt-2">
                  <input type="checkbox" class="custom-control-input" name="active" id="edit_reminder_active">
                  <label class="custom-control-label" for="edit_reminder_active">Activ</label>
                </div>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label>Șablon Mesaj</label>
            <textarea class="form-control" name="message_template" id="edit_reminder_template" rows="3" required></textarea>
            <small class="text-muted">Folosește {label}, {email}, {phone} ca variabile</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
          <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Salvează Modificările</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Editare Contact - Actualizat cu câmpuri noi -->
<div class="modal fade" id="editItemModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-edit"></i> Editează Contact</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <form id="editItemForm">
        <div class="modal-body">
          <input type="hidden" name="id" id="edit_item_id">
          <div class="form-group">
            <label>Categorie</label>
            <select class="form-control" name="category_id" id="edit_item_category" required>
              <option value="">Selectează Categorie</option>
            </select>
          </div>
          <div class="form-group">
            <label>Nume/Etichetă</label>
            <input class="form-control" name="label" id="edit_item_label">
          </div>
          <div class="form-group">
            <label>Email</label>
            <input class="form-control" type="email" name="email" id="edit_item_email">
          </div>
          <div class="form-group">
            <label>Telefon</label>
            <input class="form-control" name="phone" id="edit_item_phone">
          </div>
          <div class="form-group">
            <label>Notițe</label>
            <input class="form-control" name="memo" id="edit_item_memo">
          </div>
          <div class="form-group">
            <label>Zi de Naștere</label>
            <input class="form-control" type="date" name="birthdate" id="edit_item_birthdate">
            <small class="text-muted">Opțional - pentru reminder-uri automate</small>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
          <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Salvează Modificările</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Mapare CSV -->
<div class="modal fade" id="csvMappingModal" tabindex="-1">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-table"></i> Mapare Câmpuri CSV</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <div class="modal-body">
        <p class="text-muted">Mapează coloanele CSV la câmpurile bazei de date:</p>
        <div id="csvMappingFields"></div>
        <div class="sample-data" id="csvSampleData"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
        <button type="button" class="btn btn-primary" id="btnConfirmMapping"><i class="fas fa-upload"></i> Importă cu Mapare</button>
      </div>
    </div>
  </div>
</div>

<!-- Modal Trimitere Mesaj Personalizat -->
<div class="modal fade" id="customMessageModal" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title"><i class="fas fa-paper-plane"></i> Trimite Mesaj Personalizat</h5>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <form id="customMessageForm">
        <div class="modal-body">
          <input type="hidden" id="custom_contact_id">
          <div class="form-group">
            <label>Contact</label>
            <input class="form-control" id="custom_contact_name" readonly>
          </div>
          <div class="form-group">
            <label>Canal</label>
            <select class="form-control" id="custom_channel">
              <option value="SMS">SMS</option>
              <option value="EMAIL">Email</option>
            </select>
          </div>
          <div class="form-group">
            <label>Mesaj</label>
            <textarea class="form-control" id="custom_message" rows="4" placeholder="Introdu mesajul personalizat..." required></textarea>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Anulează</button>
          <button type="submit" class="btn btn-success"><i class="fas fa-paper-plane"></i> Trimite</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modal Confirmare -->
<div class="modal fade" id="confirmModal" tabindex="-1">
  <div class="modal-dialog modal-sm modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header bg-warning">
        <h6 class="modal-title text-dark"><i class="fas fa-exclamation-triangle"></i> Confirmare</h6>
        <button type="button" class="close" data-dismiss="modal"><span>&times;</span></button>
      </div>
      <div class="modal-body">
        <p id="confirmMessage"></p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Anulează</button>
        <button type="button" class="btn btn-danger btn-sm" id="confirmButton">Confirmă</button>
      </div>
    </div>
  </div>
</div>